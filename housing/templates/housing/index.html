{% load socialaccount %}
<html>

<head>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />
    <title>Google Registration</title>
</head>

<body>
    <!-- Bootstrap -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">


    {% load bootstrap5 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}

    <div style="width: 100%" class="shadow p-2 mb-3 bg-body rounded text-white">
    <h1 class="font-monospace text-center">Housing for UVA Students by B-07!</h1>
    </div>

    {% if user.is_authenticated %}
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand">Explore!</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link" href="{% url 'housing:studentHousingList' %}">Browse Listings</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{% url 'housing:logout' %}">Logout</a>
        </li>
        </ul>
    </div>
    </nav>
    <div class="mx-auto" style="width: 400px;">
        <p class="text-success">Welcome, {{ user.username }}! Your email is {{ user.email }}</p>
    </div>

    {% else %}
    <div class="mx-auto" style="width: 200px;">
    <h2>Please Login!</h2>
    <a href="{% provider_login_url 'google' %}">Login with Google</a>
    </div>
    {% endif %}

    <h3 class="font-monospace text-center">See all the places to live as a UVA Student!</h3>
    <div id='map' style='width: 800px; height: 400px; margin: auto'></div>
    <script>
     mapboxgl.accessToken = 'pk.eyJ1IjoiYXZhbmVlbnAiLCJhIjoiY2t2bnprNGxhMWs1MTJubzB5M2J0OG95eiJ9.xN5gncTvjcamL4-60POirQ';
     var map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/streets-v11'
     });
    </script>


</body>

</html>